CREATE TABLE amis (id INT AUTO_INCREMENT NOT NULL, utilisateur_emetteur INT NOT NULL, utilisateur_destinataire INT NOT NULL, valide TINYINT(1) NOT NULL, INDEX IDX_9FE2E7611B5ADE49 (utilisateur_emetteur), INDEX IDX_9FE2E761975BDB61 (utilisateur_destinataire), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE manifestation (id INT AUTO_INCREMENT NOT NULL, utilisateur_createur INT NOT NULL, nom VARCHAR(255) NOT NULL, date_debut DATETIME NOT NULL, date_fin DATETIME NOT NULL, adresse VARCHAR(255) NOT NULL, INDEX IDX_6F2B3F7FE4A3231B (utilisateur_createur), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE marqueur (id INT AUTO_INCREMENT NOT NULL, manifestation INT NOT NULL, nom VARCHAR(255) NOT NULL, type VARCHAR(45) NOT NULL, adresse VARCHAR(255) NOT NULL, latitude DOUBLE PRECISION NOT NULL, longitude DOUBLE PRECISION NOT NULL, date_debut DATETIME NOT NULL, dete_fin DATETIME NOT NULL, INDEX IDX_7FEB8C216F2B3F7F (manifestation), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE organisation (id INT AUTO_INCREMENT NOT NULL, utilisateur INT NOT NULL, manifestation INT NOT NULL, marqueur INT DEFAULT NULL, INDEX IDX_E6E132B41D1C63B3 (utilisateur), INDEX IDX_E6E132B46F2B3F7F (manifestation), INDEX IDX_E6E132B47FEB8C21 (marqueur), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE participation (id INT AUTO_INCREMENT NOT NULL, utilisateur INT NOT NULL, manifestation INT NOT NULL, INDEX IDX_AB55E24F1D1C63B3 (utilisateur), INDEX IDX_AB55E24F6F2B3F7F (manifestation), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE utilisateur (id INT AUTO_INCREMENT NOT NULL, username VARCHAR(255) NOT NULL, username_canonical VARCHAR(255) NOT NULL, email VARCHAR(255) NOT NULL, email_canonical VARCHAR(255) NOT NULL, enabled TINYINT(1) NOT NULL, salt VARCHAR(255) NOT NULL, password VARCHAR(255) NOT NULL, last_login DATETIME DEFAULT NULL, locked TINYINT(1) NOT NULL, expired TINYINT(1) NOT NULL, expires_at DATETIME DEFAULT NULL, confirmation_token VARCHAR(255) DEFAULT NULL, password_requested_at DATETIME DEFAULT NULL, roles LONGTEXT NOT NULL COMMENT '(DC2Type:array)', credentials_expired TINYINT(1) NOT NULL, credentials_expire_at DATETIME DEFAULT NULL, prenom VARCHAR(255) NOT NULL, nom VARCHAR(255) NOT NULL, adresse VARCHAR(255) DEFAULT NULL, UNIQUE INDEX UNIQ_1D1C63B392FC23A8 (username_canonical), UNIQUE INDEX UNIQ_1D1C63B3A0D96FBF (email_canonical), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE amis ADD CONSTRAINT FK_9FE2E7611B5ADE49 FOREIGN KEY (utilisateur_emetteur) REFERENCES utilisateur (id);
ALTER TABLE amis ADD CONSTRAINT FK_9FE2E761975BDB61 FOREIGN KEY (utilisateur_destinataire) REFERENCES utilisateur (id);
ALTER TABLE manifestation ADD CONSTRAINT FK_6F2B3F7FE4A3231B FOREIGN KEY (utilisateur_createur) REFERENCES utilisateur (id);
ALTER TABLE marqueur ADD CONSTRAINT FK_7FEB8C216F2B3F7F FOREIGN KEY (manifestation) REFERENCES manifestation (id);
ALTER TABLE organisation ADD CONSTRAINT FK_E6E132B41D1C63B3 FOREIGN KEY (utilisateur) REFERENCES utilisateur (id);
ALTER TABLE organisation ADD CONSTRAINT FK_E6E132B46F2B3F7F FOREIGN KEY (manifestation) REFERENCES manifestation (id);
ALTER TABLE organisation ADD CONSTRAINT FK_E6E132B47FEB8C21 FOREIGN KEY (marqueur) REFERENCES marqueur (id);
ALTER TABLE participation ADD CONSTRAINT FK_AB55E24F1D1C63B3 FOREIGN KEY (utilisateur) REFERENCES utilisateur (id);
ALTER TABLE participation ADD CONSTRAINT FK_AB55E24F6F2B3F7F FOREIGN KEY (manifestation) REFERENCES manifestation (id)